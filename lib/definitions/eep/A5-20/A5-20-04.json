{
    "eep": "A5-20-04",
    "rorg_number": "0xA5",
    "telegram": "4BS",
    "func_number": "0x20",
    "type_number": "0x04",
    "type_title": "Heating Radiator Valve Actuating Drive",
    "case": [
        {
            "send": false,
            "datafield": [
                {
                    "data": "Current Value 0...100%",
                    "shortcut": "in.CV",
                    "bitoffs": "0",
                    "bitsize": "8",
                    "iobroker": {
                        "role": "value.valve",
                        "type": "number",
                        "unit": "%",
                        "read": true,
                        "write": false
                    },
                    "value": {
                        "var": "value"
                    }
                },
                {
                    "data": "Temperature Feed or Set Point 20...80°C or 10...30°C",
                    "shortcut": "in.TMP",
                    "bitoffs": "8",
                    "bitsize": "8",
                    "iobroker": {
                        "role": "value.temperature",
                        "type": "number",
                        "read": true,
                        "write": false,
                        "unit": "°C"
                    },
                    "secondArgument": {
                        "bitoffs": "30",
                        "bitsize": "1"
                    },
                    "value": {
                        "if": [
                            {"===": [{"var": "value2"}, 0]}, {"+": [{ "*": [{ "-": [{ "var": "value"}, 0 ]}, 0.23529411764705882 ]}, 20 ]},
                            {"===": [{"var": "value2"}, 1]}, {"+": [{ "*": [{ "-": [{ "var": "value"}, 0 ]}, 0.0784313725490196 ]}, 10 ]}
                        ]
                    },
                    "decimals": 2
                },
                {
                    "data": "Room Temperature 10...30°C",
                    "shortcut": "in.RTMP",
                    "bitoffs": "16",
                    "bitsize": "8",
                    "iobroker": {
                        "role": "value.temperature",
                        "type": "number",
                        "read": true,
                        "write": false,
                        "unit": "°C"
                    },
                    "secondArgument": {
                        "bitoffs": "31",
                        "bitsize": "1"
                    },
                    "condition": { "==": [ { "var": "value2" }, 0 ] },
                    "value": {"+": [{ "*": [{ "-": [{ "var": "value"}, 0 ]}, 0.0784313725490196 ]}, 10 ]},
                    "decimals": 2
                },
                {
                    "data": "Failure Code",
                    "shortcut": "in.FC",
                    "iobroker": {
                        "role": "state",
                        "type": "number",
                        "read": true,
                        "write": true,
                        "states": "17:Measurement error; 18:Battery empty; 20:Frost protection; 33:Blocked valve; 36:End point detection error; 40:No valve; 49:Not taught in; 53:No response from controller; 54:Teach-in error;"
                    },
                    "secondArgument": {
                        "bitoffs": "31",
                        "bitsize": "1"
                    },
                    "condition": { "==": [ { "var": "value2" }, 0 ] },
                    "value": {
                        "var": "value"
                    }
                },
                {
                    "data": "Measurement active",
                    "shortcut": "in.MST",
                    "bitoffs": "24",
                    "bitsize": "1",
                    "iobroker": {
                        "role": "indicator",
                        "type": "boolean",
                        "read": true,
                        "write": false
                    },
                    "value": {
                        "==": [
                            {
                                "var": "value"
                            },
                            0
                        ]
                    }
                },
                {
                    "data": "Buttons locked",
                    "shortcut": "in.BLS",
                    "bitoffs": "29",
                    "bitsize": "1",
                    "iobroker": {
                        "role": "indicator",
                        "type": "boolean",
                        "read": true,
                        "write": false
                    },
                    "value": {
                        "==": [
                            {
                                "var": "value"
                            },
                            1
                        ]
                    }
                }
            ]
        },
        {
            "send": true,
            "condition": {
                "command": [
                    {
                        "value": 0
                    }
                ]
            },
            "datafield": [
                {
                    "data": "Command",
                    "shortcut": "CMD",
                    "iobroker": {
                        "role": "state",
                        "type": "number",
                        "read": true,
                        "write": true,
                        "states": "0:Set Valve position; 1:Set Temperature; 2:Summer mode; 3:Open valve; 4:Close valve"
                    },
                    "value": {
                        "var": "value"
                    }
                },
                {
                    "data": "Valve position (0...100)",
                    "shortcut": "POS",
                    "bitoffs": "0",
                    "bitsize": "8",
                    "iobroker": {
                        "role": "level",
                        "type": "number",
                        "read": false,
                        "write": true
                    },
                    "value": {
                        "var": "value"
                    }
                },
                {
                    "data": "fixed parameter",
                    "description": "Temperature Setpoint",
                    "bitoffs": "8",
                    "bitsize": "8",
                    "value": 0
                },
                {
                    "data": "Measurement active",
                    "shortcut": "MC",
                    "bitoffs": "17",
                    "bitsize": "1",
                    "iobroker": {
                        "role": "state",
                        "type": "boolean",
                        "read": true,
                        "write": true
                    },
                    "value_out": {
                        "if": [
                            { "==": [{"var": "value"}, true]}, 0,
                            { "==": [{"var": "value"}, false]}, 1
                        ]
                    }
                },
                {
                    "data": "Wake-up Cycle",
                    "shortcut": "WUC",
                    "iobroker": {
                        "role": "state",
                        "type": "number",
                        "read": true,
                        "write": true,
                        "states": "00:10 sec; 1:60 sec; 2:90 sec; 3:120 sec; 4:150 sec; 5: 180 sec; 6: 210 sec; 7:240 sec; 8:270 sec; 9:300 sec (5 min); 10:330 sec; 11:360 sec; 12:390 sec; 13:420 sec; 14:450 sec; 15:480 sec; 16:510 sec; 17:540 sec; 18:570 sec; 19:600 sec (10 min); 20:630 sec; 21:660 sec; 22:690 sec; 23:720 sec; 24:750 sec; 25:780 sec; 26:810 sec; 27:840 sec; 28:870 sec; 29:900 sec (15 min); 30:930 sec; 31:960 sec;"
                    },
                    "value": {
                        "var": "value"
                    }
                },
                {
                    "shortcut": "LEARNBIT",
                    "bitoffs": "28",
                    "bitsize": "1",
                    "value": 1
                }
            ]
        },
        {
            "send": true,
            "condition": {
                "command": [
                    {
                        "value": 1
                    }
                ]
            },
            "datafield": [
                {
                    "data": "Valve position (0...100) or temperature setpoint (0...+40°C)",
                    "shortcut": "SP",
                    "bitoffs": "0",
                    "bitsize": "8",
                    "iobroker": {
                        "role": "level",
                        "type": "number",
                        "read": false,
                        "write": true
                    },
                    "value": {
                        "var": "value"
                    },
                    "value_out": {"*": [ { "+": [ { "-": [ { "var": "value" }, 0 ] }, 0 ] }, 6.375 ]}
                },
                {
                    "data": "Send actual room temperature",
                    "shortcut": "TMP",
                    "bitoffs": "8",
                    "bitsize": "8",
                    "iobroker": {
                        "role": "value.temperature",
                        "type": "number",
                        "read": true,
                        "write": true,
                        "unit": "°C"
                    },
                    "value": {
                        "+": [ { "*": [ { "-": [ { "var": "value" }, 0 ] }, 6.375 ] }, 0 ]
                    },
                    "value_out": {"*": [ { "+": [ { "-": [ { "var": "value" }, 0 ] }, 0 ] }, 6.375 ]},
                    "decimals": 2
                },
                {
                    "data": "fixed parameter",
                    "description": "Setpoint selection",
                    "bitoffs": "21",
                    "bitsize": "1",
                    "value": 1
                },
                {
                    "data": "fixed parameter",
                    "description": "Learn Bit",
                    "bitoffs": "28",
                    "bitsize": "1",
                    "value": 1
                }
            ]
        },
        {
            "send": true,
            "condition": {
                "command": [
                    {
                        "value": 2
                    }
                ]
            },
            "datafield": [
                {
                    "data": "fixed parameter",
                    "description": "dummy byte",
                    "bitoffs": "0",
                    "bitsize": "8",
                    "value": 0
                },
                {
                    "data": "Valve position (0...100) or temperature setpoint (0...+40°C)",
                    "shortcut": "SP",
                    "bitoffs": "0",
                    "bitsize": "8",
                    "iobroker": {
                        "role": "level",
                        "type": "number",
                        "read": false,
                        "write": true
                    },
                    "value": {
                        "var": "value"
                    },
                    "value_out": {"*": [ { "+": [ { "-": [ { "var": "value" }, 0 ] }, 0 ] }, 6.375 ]}
                },
                {
                    "data": "fixed parameter",
                    "description": "Summer Bit",
                    "bitoffs": "20",
                    "bitsize": "1",
                    "value": 1
                },
                {
                    "data": "fixed parameter",
                    "description": "Learn Bit",
                    "bitoffs": "28",
                    "bitsize": "1",
                    "value": 1
                }
            ]
        },
        {
            "send": true,
            "condition": {
                "command": [
                    {
                        "value": 3
                    }
                ]
            },
            "datafield": [
                {
                    "data": "fixed parameter",
                    "description": "dummy byte",
                    "bitoffs": "0",
                    "bitsize": "8",
                    "value": 0
                },
                {
                    "data": "fixed parameter",
                    "description": "dummy byte",
                    "bitoffs": "8",
                    "bitsize": "8",
                    "value": 0
                },
                {
                    "data": "fixed parameter",
                    "description": "Valve open",
                    "bitoffs": "18",
                    "bitsize": "1",
                    "value": 1
                },
                {
                    "data": "fixed parameter",
                    "description": "Service mode ON",
                    "bitoffs": "23",
                    "bitsize": "1",
                    "value": 1
                },
                {
                    "data": "fixed parameter",
                    "description": "Learn Bit",
                    "bitoffs": "28",
                    "bitsize": "1",
                    "value": 1
                }
            ]
        },
        {
            "send": true,
            "condition": {
                "command": [
                    {
                        "value": 4
                    }
                ]
            },
            "datafield": [
                {
                    "data": "fixed parameter",
                    "description": "dummy byte",
                    "bitoffs": "0",
                    "bitsize": "8",
                    "value": 0
                },
                {
                    "data": "fixed parameter",
                    "description": "dummy byte",
                    "bitoffs": "8",
                    "bitsize": "8",
                    "value": 0
                },
                {
                    "data": "fixed parameter",
                    "description": "Valve closed",
                    "bitoffs": "19",
                    "bitsize": "1",
                    "value": 1
                },
                {
                    "data": "fixed parameter",
                    "description": "Service mode ON",
                    "bitoffs": "23",
                    "bitsize": "1",
                    "value": 1
                },
                {
                    "data": "fixed parameter",
                    "description": "Learn Bit",
                    "bitoffs": "28",
                    "bitsize": "1",
                    "value": 1
                }
            ]
        }
    ]
}
